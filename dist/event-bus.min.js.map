{"version":3,"sources":["webpack://eventBus/webpack/universalModuleDefinition","webpack://eventBus/webpack/bootstrap","webpack://eventBus/./src/index.ts","webpack://eventBus/./node_modules/@sardonyxwt/utils/object/object.min.js","webpack://eventBus/./node_modules/@sardonyxwt/utils/generator/generator.min.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","object_1","generator_1","eventBuses","generateEventBusName","createUniqueIdGenerator","generateEventBusListenerId","eventBusDevTool","onCreate","onEvent","EventBusImpl","config","this","_events","_queue","_listeners","isFrozen","_name","_isFrozen","slice","registerEvent","eventName","_this","Error","find","it","push","capitalizeFirstLetterEventName","charAt","toUpperCase","subscriberMacroName","dispatcherMacroName","listener","subscribe","eventDispatcher","data","publish","deepFreeze","event","eventBusName","getOwnPropertyNames","forEach","reason","console","error","shift","length","nextEventDispatcher","isFirstInQuery","eventNames","Array","isArray","apply","findIndex","listenerId","assign","unsubscribe","id","lock","isEventBusExist","createEventBus","_a","_b","eventBus","getEventBus","setEventBusDevTool","devTool","self","e","configurable","default","2","freeze","flatten","f","unflatten","u","split","isNaN","parseInt","stringifyValue","JSON","stringify","generateSalt","Math","floor","random","generateUUID"],"mappings":"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","file":"event-bus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"eventBus\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"eventBus\"] = factory();\n\telse\n\t\troot[\"eventBus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import {deepFreeze} from '@sardonyxwt/utils/object';\nimport {createUniqueIdGenerator} from '@sardonyxwt/utils/generator';\n\nexport type EventBusConfig = {\n  name?,\n  isFrozen?: boolean\n};\n\nexport type EventBusEvent = {\n  eventBusName: string,\n  eventName: string,\n  data?\n};\n\nexport type EventBusListenerUnsubscribeCallback = (() => boolean) & {listenerId: string};\nexport type EventBusListener = (event: EventBusEvent) => void;\nexport type EventBusDispatcher = (data?) => void;\n\nexport interface EventBus {\n\n  readonly name: string;\n\n  readonly isLocked: boolean;\n\n  readonly supportEvents: string[];\n\n  registerEvent(eventName: string): EventBusDispatcher;\n\n  publish(eventName: string, data?): void;\n\n  subscribe(listener: EventBusListener, eventName?: string | string[]): EventBusListenerUnsubscribeCallback;\n\n  unsubscribe(id: string): boolean;\n\n  lock(): void;\n\n}\n\nexport interface EventBusDevTool {\n\n  onCreate(eventBus: EventBus): void;\n\n  onEvent(event: EventBusEvent): void;\n\n}\n\nconst eventBuses: EventBus[] = [];\nconst generateEventBusName = createUniqueIdGenerator('EventBus');\nconst generateEventBusListenerId = createUniqueIdGenerator('EventBusListener');\nconst eventBusDevTool: EventBusDevTool = {\n  onCreate: () => null,\n  onEvent: () => null\n};\n\nclass EventBusImpl implements EventBus {\n\n  private readonly _name: string;\n  private _isFrozen: boolean;\n  private _events: string[] = [];\n  private _queue: Function[] = [];\n  private _listeners: { [key: string]: EventBusListener } = {};\n\n  constructor(config: EventBusConfig) {\n    const {name, isFrozen} = config;\n    this._name = name;\n    this._isFrozen = isFrozen;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get isLocked() {\n    return this._isFrozen;\n  }\n\n  get supportEvents() {\n    return [...this._events];\n  }\n\n  registerEvent(eventName: string) {\n    if (this._isFrozen) {\n      throw new Error(`This event bus is locked you can't add new event.`);\n    }\n    if (!!this._events.find(it => it === eventName) || (eventName in this)) {\n      throw new Error(`Event with name ${eventName} is duplicate or reserved in event bus ${this._name}.`);\n    }\n    this._events.push(eventName);\n\n    const capitalizeFirstLetterEventName = () => {\n      return eventName.charAt(0).toUpperCase() + eventName.slice(1);\n    };\n\n    const subscriberMacroName = `on${capitalizeFirstLetterEventName()}`;\n    const dispatcherMacroName = `publish${capitalizeFirstLetterEventName()}`;\n\n    this[subscriberMacroName] = (listener: EventBusListener) => this.subscribe(listener, eventName);\n\n    const eventDispatcher = (data?) => this.publish(eventName, data);\n\n    this[dispatcherMacroName] = eventDispatcher;\n\n    return eventDispatcher;\n  }\n\n  publish(eventName: string, data?) {\n    const eventDispatcher = () => {\n      if (data && typeof data === 'object') {\n        deepFreeze(data);\n      }\n\n      const event: EventBusEvent = {\n        eventBusName: this._name,\n        eventName,\n        data\n      };\n\n      eventBusDevTool.onEvent(event);\n\n      Object.getOwnPropertyNames(this._listeners).forEach(key => {\n        const listener = this._listeners[key];\n        try {\n          if (listener) listener(event);\n        } catch (reason) {\n          console.error(`Event bus listener ${key} error.`, event);\n        }\n      });\n\n      this._queue.shift();\n\n      if (this._queue.length > 0) {\n        const nextEventDispatcher = this._queue[0];\n        nextEventDispatcher();\n      }\n    };\n\n    const isFirstInQuery = this._queue.length === 0;\n\n    this._queue.push(eventDispatcher);\n\n    if (isFirstInQuery) {\n      eventDispatcher();\n    }\n  }\n\n  subscribe(listener: EventBusListener, eventName?: string | string[]) {\n    const eventNames: string[] = [];\n\n    if (Array.isArray(eventName)) {\n      eventNames.push(...eventName);\n    } else if (eventName) {\n      eventNames.push(eventName);\n    }\n\n    eventNames.forEach(eventName => {\n      if (this._events.findIndex(it => it === eventName) === -1) {\n        throw new Error(`Event (${eventName}) not present in scope.`);\n      }\n    });\n\n    const listenerId = generateEventBusListenerId();\n    this._listeners[listenerId] = event => {\n\n      if (eventNames.length === 0) {\n        return listener(event);\n      }\n\n      const isActionPresentInScope = eventNames.findIndex(\n        eventName => eventName === event.eventName\n      ) !== -1;\n\n      if (isActionPresentInScope) {\n        listener(event);\n      }\n    };\n    return Object.assign(() => this.unsubscribe(listenerId), {listenerId});\n  }\n\n  unsubscribe(id: string) {\n    return delete this._listeners[id];\n  }\n\n  lock() {\n    this._isFrozen = true;\n  }\n\n}\n\nexport function isEventBusExist(eventBusName: string) {\n  return !!eventBuses.find(it => it.name === eventBusName);\n}\n\nexport function createEventBus(config: EventBusConfig = {}): EventBus {\n  const {\n    name = generateEventBusName(),\n    isFrozen = false\n  } = config;\n  if (isEventBusExist(name)) {\n    throw new Error(`Event bus name must unique`);\n  }\n  let eventBus = new EventBusImpl({name, isFrozen});\n  eventBuses.push(eventBus);\n  eventBusDevTool.onCreate(eventBus);\n  return eventBus;\n}\n\nexport function getEventBus(eventBusName: string) {\n  if (!isEventBusExist(eventBusName)) {\n    throw new Error(`Event bus with name ${eventBusName} not present`);\n  }\n  return eventBuses.find(it => it.name === eventBusName);\n}\n\nexport function setEventBusDevTool(devTool: Partial<EventBusDevTool>) {\n  Object.assign(eventBusDevTool, devTool);\n}\n","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)(\"object\"==typeof exports?exports:e)[n]=r[n]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=2)}({2:function(e,t,r){\"use strict\";function n(e){return Object.getOwnPropertyNames(e).forEach(function(t){var r=e[t];\"object\"==typeof r&&null!==r&&n(r)}),Object.freeze(e)}function o(e){function t(e,n){if(Object(e)!==e)r[n]=e;else if(Array.isArray(e))if(0===e.length)r[n]=[];else for(var o=0;o<e.length;o++)t(e[o],n?n+\".\"+o:\"\"+o);else{var f=Object.getOwnPropertyNames(e);0!==f.length?f.forEach(function(r){return t(e[r],n?n+\".\"+r:r)}):r[n]={}}}var r={};return t(e,\"\"),r}function f(e){if(Object(e)!==e||Array.isArray(e))return e;var t,r,n,o,f={};return Object.getOwnPropertyNames(e).forEach(function(u){t=f,r=\"\",n=u.split(\".\");for(var i=0;i<n.length;i++)o=!isNaN(parseInt(n[i],10)),t=t[r]||(t[r]=o?[]:{}),r=n[i];t[r]=e[u]}),f[\"\"]}function u(e){return void 0===e||null===e?\"\":\"number\"==typeof e?\"\"+e:\"object\"==typeof e?JSON.stringify(e):e}Object.defineProperty(t,\"__esModule\",{value:!0}),t.deepFreeze=n,t.flatten=o,t.unflatten=f,t.stringifyValue=u}})});\n//# sourceMappingURL=object.min.js.map","!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=1)}([,function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.generateSalt=function(e,t){void 0===e&&(e=16),void 0===t&&(t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\");for(var n=\"\";n.length<e;)n+=t.charAt(Math.floor(Math.random()*t.length));return n},t.generateUUID=function(){return t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)+\"-\"+t.generateSalt(4)},t.createUniqueIdGenerator=function(e){var n=0,r=t.generateUUID(),o=e+\":\"+r;return function(){return o+\":\"+ ++n}}}])});\n//# sourceMappingURL=generator.min.js.map"],"sourceRoot":""}